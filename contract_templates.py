from typing import Dict

CONTRACT_TEMPLATES = {
    "房屋租赁合同": {
        "name": "房屋租赁合同",
        "fields": {
            "出租方姓名": "",
            "出租方证件号码": "",
            "承租方姓名": "",
            "承租方证件号码": "",
            "房屋地址": "",
            "房屋面积": "",
            "租赁用途": ["居住", "办公", "商用", "其他"],
            "租金(元/月)": "",
            "租赁期限(月)": "",
            "付款方式": ["月付", "季付", "半年付", "年付"],
            "押金(元)": "",
            "其他约定": ""
        }
    },
    "劳动合同": {
        "name": "劳动合同",
        "fields": {
            "用人单位名称": "",
            "单位地址": "",
            "法定代表人": "",
            "员工姓名": "",
            "员工证件号码": "",
            "工作岗位": "",
            "工作地点": "",
            "试用期(月)": "",
            "合同期限(月)": "",
            "基本工资(元/月)": "",
            "工作时间": ["标准工时", "综合工时", "不定时工作制"],
            "社保福利": ["五险一金", "五险", "其他"],
            "其他待遇": ""
        }
    },
    "购销合同": {
        "name": "购销合同",
        "fields": {
            "供方名称": "",
            "供方地址": "",
            "供方联系人": "",
            "需方名称": "",
            "需方地址": "",
            "需方联系人": "",
            "商品名称": "",
            "规格型号": "",
            "数量": "",
            "单价(元)": "",
            "总价(元)": "",
            "交货方式": ["送货上门", "自提", "物流配送"],
            "付款方式": ["全额付款", "分期付款", "货到付款"],
            "质保期": "",
            "其他条款": ""
        }
    },
    "二手车买卖合同": {
        "name": "二手车买卖合同",
        "fields": {
            "出售方姓名": "",
            "出售方证件号码": "",
            "出售方联系电话": "",
            "购买方姓名": "",
            "购买方证件号码": "",
            "购买方联系电话": "",
            "车辆品牌型号": "",
            "车架号": "",
            "发动机号": "",
            "车牌号": "",
            "初次登记日期": "",
            "行驶里程(公里)": "",
            "车辆颜色": "",
            "过户方式": ["本地过户", "异地过户"],
            "过户费用承担": ["买方承担", "卖方承担", "双方平摊"],
            "车辆总价(元)": "",
            "付款方式": ["一次性付款", "分期付款", "定金+尾款"],
            "交易地点": "",
            "车况状况": ["正常", "有维修记录", "有事故记录", "有违章记录"],
            "其他约定": ""
        }
    }
}


def get_prompt_for_contract(template_type: str, details: Dict) -> str:
    """根据模板类型和详情生成提示词"""

    if template_type == "自定义合同":
        prompt = f"""请根据以下信息生成一份专业的合同文本：

合同名称：{details.get('合同名称', '合同')}

合同双方信息：
{details.get('合同双方信息', '')}

合同主要内容：
{details.get('合同主要内容', '')}

"""
        if details.get('特殊约定'):
            prompt += f"""
特殊约定：
{details.get('特殊约定')}
"""

    else:
        template = CONTRACT_TEMPLATES[template_type]
        prompt = f"""请根据以下信息生成一份专业的{template['name']}：

"""
        # 添加所有字段信息
        for field, value in details.items():
            if isinstance(value, list):
                value = '、'.join(value)
            prompt += f"{field}：{value}\n"

    # 添加通用的合同要求
    prompt += """
请生成一份完整的合同文本，包含以下部分：
1. 合同标题
2. 合同双方基本信息
3. 合同标的
4. 权利义务
5. 合同期限
6. 价格与支付
7. 违约责任
8. 争议解决方式
9. 其他约定
10. 合同生效条款
11. 签章部分

要求：
1. 条款完整，措辞专业规范
2. 权责明确，避免歧义
3. 符合相关法律法规
4. 适当引用法律依据
5. 注意保护双方合法权益
"""

    return prompt